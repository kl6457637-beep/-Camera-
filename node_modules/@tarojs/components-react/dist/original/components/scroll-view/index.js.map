{"version":3,"file":"index.js","sources":["../../../../src/components/scroll-view/index.tsx"],"sourcesContent":["import './style/index.scss'\n\nimport { isFunction } from '@tarojs/shared'\nimport classNames from 'classnames'\n\nimport { createForwardRefComponent, throttle } from '../../utils'\nimport { useEffect, useRef } from '../../utils/hooks'\n\nimport type React from 'react'\n\nfunction easeOutScroll (from = 0, to = 0, callback) {\n  if (from === to || typeof from !== 'number') {\n    return\n  }\n  const change = to - from\n  const dur = 500\n  const sTime = +new Date()\n  function linear (t, b, c, d) {\n    return (c * t) / d + b\n  }\n  const isLarger = to >= from\n\n  function step () {\n    from = linear(+new Date() - sTime, from, change, dur)\n    if ((isLarger && from >= to) || (!isLarger && to >= from)) {\n      callback(to)\n      return\n    }\n    callback(from)\n    requestAnimationFrame(step)\n  }\n  step()\n}\n\nfunction scrollIntoView (id = '', isHorizontal = false, animated = true, scrollIntoViewAlignment?: ScrollLogicalPosition) {\n  document.querySelector(`#${id}`)?.scrollIntoView({\n    behavior: animated ? 'smooth' : 'auto',\n    block: !isHorizontal ? (scrollIntoViewAlignment || 'center') : 'center',\n    inline: isHorizontal ? (scrollIntoViewAlignment || 'start') : 'start'\n  })\n}\n\nfunction scrollVertical (container, scrollTop, top, isAnimation) {\n  if (isAnimation) {\n    easeOutScroll(scrollTop.current, top, pos => {\n      if (container.current) container.current.scrollTop = pos\n    })\n  } else {\n    if (container.current) container.current.scrollTop = top\n  }\n  scrollTop.current = top\n}\n\nfunction scrollHorizontal (container, scrollLeft, left, isAnimation) {\n  if (isAnimation) {\n    easeOutScroll(scrollLeft.current, left, pos => {\n      if (container.current) container.current.scrollLeft = pos\n    })\n  } else {\n    if (container.current) container.current.scrollLeft = left\n  }\n  scrollLeft.current = left\n}\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n  scrollX: boolean\n  scrollY: boolean\n  upperThreshold: number\n  lowerThreshold: number\n  scrollTop: number\n  scrollLeft: number\n  scrollIntoView?: string\n  scrollIntoViewAlignment?: ScrollLogicalPosition\n  scrollWithAnimation: boolean\n  enableBackToTop?: boolean\n  forwardedRef?: React.MutableRefObject<HTMLDivElement>\n  onScrollToUpper: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onScrollToLower: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onScroll: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onScrollStart?: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onScrollEnd?: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onTouchMove: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onTouchStart?: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  onTouchEnd?: (e: React.SyntheticEvent<HTMLDivElement, Event>) => void\n  showScrollbar?: boolean // 新增参数，默认true\n  enhanced?: boolean // 新增参数，默认false\n}\n\nfunction ScrollView (props: IProps) {\n  const _scrollTop = useRef<any>(null)\n  const _scrollLeft = useRef<any>(null)\n  const container = useRef<any>(null)\n  const scrollEndTimerRef = useRef<NodeJS.Timeout | null>(null)\n  const isScrollingRef = useRef<boolean>(false)\n  const isInitializedRef = useRef<boolean>(false)\n  const onTouchMove = (e) => {\n    e.stopPropagation()\n  }\n\n  const handleScroll = (props: IProps, isInit = false) => {\n    // scrollIntoView\n    if (\n      props.scrollIntoView &&\n      typeof props.scrollIntoView === 'string' &&\n      document &&\n      document.querySelector &&\n      document.querySelector(`#${props.scrollIntoView}`)\n    ) {\n      const isHorizontal = props.scrollX && !props.scrollY\n      if (isInit) {\n        setTimeout(() => scrollIntoView(props.scrollIntoView, props.scrollWithAnimation, isHorizontal, props.scrollIntoViewAlignment), 500)\n      } else {\n        scrollIntoView(props.scrollIntoView, props.scrollWithAnimation, isHorizontal, props.scrollIntoViewAlignment)\n      }\n    } else {\n      const isAnimation = !!props.scrollWithAnimation\n      // Y 轴滚动\n      if (props.scrollY && typeof props.scrollTop === 'number' && props.scrollTop !== _scrollTop.current) {\n        setTimeout(() => scrollVertical(container, _scrollTop, props.scrollTop, isAnimation), 10)\n      }\n      // X 轴滚动\n      if (props.scrollX && typeof props.scrollLeft === 'number' && props.scrollLeft !== _scrollLeft.current) {\n        setTimeout(() => scrollHorizontal(container, _scrollLeft, props.scrollLeft, isAnimation), 10)\n      }\n    }\n  }\n\n  useEffect(() => {\n    handleScroll(props, true)\n    isInitializedRef.current = true\n  }, [])\n\n  // 监听 scrollTop、scrollLeft、scrollIntoView 的变化（排除初始化）\n  useEffect(() => {\n    if (isInitializedRef.current && container.current) {\n      handleScroll(props, false)\n    }\n  }, [props.scrollTop, props.scrollLeft, props.scrollIntoView])\n\n  const {\n    className,\n    style = {},\n    onScroll,\n    onScrollToUpper,\n    onScrollToLower,\n    scrollX,\n    scrollY,\n    showScrollbar = true, // 默认显示滚动条\n    enhanced = false // 默认不增强\n  } = props\n  let { upperThreshold = 50, lowerThreshold = 50 } = props\n  const cls = classNames(\n    'taro-scroll',\n    {\n      'taro-scroll-view__scroll-x': scrollX,\n      'taro-scroll-view__scroll-y': scrollY,\n      'taro-scroll--hidebar': enhanced === true && showScrollbar === false,\n      'taro-scroll--enhanced': enhanced === true\n    },\n    className\n  )\n  upperThreshold = Number(upperThreshold)\n  lowerThreshold = Number(lowerThreshold)\n  const upperAndLower = e => {\n    if (!container.current) return\n    const { offsetWidth, offsetHeight, scrollLeft, scrollTop, scrollHeight, scrollWidth } = container.current\n    if (\n      onScrollToLower &&\n      ((props.scrollY && offsetHeight + scrollTop + lowerThreshold >= scrollHeight) ||\n        (props.scrollX && offsetWidth + scrollLeft + lowerThreshold >= scrollWidth))\n    ) {\n      onScrollToLower(e)\n    }\n    if (\n      onScrollToUpper &&\n      ((props.scrollY && scrollTop <= upperThreshold) || (props.scrollX && scrollLeft <= upperThreshold))\n    ) {\n      onScrollToUpper(e)\n    }\n  }\n  const upperAndLowerThrottle = throttle(upperAndLower, 200)\n  const _onScroll = e => {\n    const { scrollLeft, scrollTop, scrollHeight, scrollWidth } = container.current\n    _scrollLeft.current = scrollLeft\n    _scrollTop.current = scrollTop\n    Object.defineProperty(e, 'detail', {\n      enumerable: true,\n      writable: true,\n      value: {\n        scrollLeft,\n        scrollTop,\n        scrollHeight,\n        scrollWidth\n      }\n    })\n\n    // 处理滚动开始\n    if (!isScrollingRef.current) {\n      isScrollingRef.current = true\n      if (props.onScrollStart) {\n        props.onScrollStart(e)\n      }\n    }\n\n    // 清除滚动结束定时器\n    if (scrollEndTimerRef.current) {\n      clearTimeout(scrollEndTimerRef.current)\n      scrollEndTimerRef.current = null\n    }\n\n    // 设置滚动结束定时器（150ms 无滚动事件后触发）\n    if (props.onScrollEnd) {\n      scrollEndTimerRef.current = setTimeout(() => {\n        if (isScrollingRef.current) {\n          isScrollingRef.current = false\n          props.onScrollEnd?.(e)\n        }\n        scrollEndTimerRef.current = null\n      }, 150)\n    }\n\n    upperAndLowerThrottle(e)\n    onScroll && onScroll(e)\n  }\n  const _onTouchMove = e => {\n    isFunction(props.onTouchMove) ? props.onTouchMove(e) : onTouchMove(e)\n  }\n  const _onTouchStart = e => {\n    if (isFunction(props.onTouchStart)) {\n      props.onTouchStart(e)\n    }\n  }\n  const _onTouchEnd = e => {\n    if (isFunction(props.onTouchEnd)) {\n      props.onTouchEnd(e)\n    }\n  }\n  // 清理定时器\n  useEffect(() => {\n    return () => {\n      if (scrollEndTimerRef.current) {\n        clearTimeout(scrollEndTimerRef.current)\n        scrollEndTimerRef.current = null\n      }\n    }\n  }, [])\n\n  return (\n    <div\n      ref={e => {\n        if (e) {\n          container.current = e\n          if (props.forwardedRef) props.forwardedRef.current = e\n        }\n      }}\n      style={style}\n      className={cls}\n      onScroll={_onScroll}\n      onTouchMove={_onTouchMove}\n      onTouchStart={_onTouchStart}\n      onTouchEnd={_onTouchEnd}\n    >\n      {props.children}\n    </div>\n  )\n}\n\nexport default createForwardRefComponent(ScrollView)\n"],"names":["easeOutScroll","from","arguments","length","undefined","to","callback","change","dur","sTime","Date","linear","t","b","c","d","isLarger","step","requestAnimationFrame","scrollIntoView","id","isHorizontal","animated","scrollIntoViewAlignment","_a","document","querySelector","behavior","block","inline","scrollVertical","container","scrollTop","top","isAnimation","current","pos","scrollHorizontal","scrollLeft","left","ScrollView","props","_scrollTop","useRef","_scrollLeft","scrollEndTimerRef","isScrollingRef","isInitializedRef","onTouchMove","e","stopPropagation","handleScroll","isInit","scrollX","scrollY","setTimeout","scrollWithAnimation","useEffect","className","style","onScroll","onScrollToUpper","onScrollToLower","showScrollbar","enhanced","upperThreshold","lowerThreshold","cls","classNames","Number","upperAndLower","offsetWidth","offsetHeight","scrollHeight","scrollWidth","upperAndLowerThrottle","throttle","_onScroll","Object","defineProperty","enumerable","writable","value","onScrollStart","clearTimeout","onScrollEnd","call","_onTouchMove","isFunction","_onTouchStart","onTouchStart","_onTouchEnd","onTouchEnd","_jsx","ref","forwardedRef","children","createForwardRefComponent"],"mappings":"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"}