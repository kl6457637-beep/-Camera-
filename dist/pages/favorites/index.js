"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[222],{943:function(e,s,t){var c=t(8870),a=t(1212),i=t(467),n=t(5544),r=t(758),o=t.n(r),l=t(6540),h=t(118),p=t(2375),f=t(4848),m=function(){return[{id:"1",title:"\u6668\u5149\u5c11\u5973",description:"\u81ea\u7136\u5149\u4e0b\u7684\u6e29\u67d4\u65f6\u523b",images:["https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=800&fit=crop&crop=face","https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600&h=800&fit=crop&crop=face","https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600&h=800&fit=crop&crop=face"],style:"\u6e05\u65b0",location:"\u4e0a\u6d77\u6cd5\u79df\u754c",likes:234,createdAt:"2024-01-15"},{id:"2",title:"\u590d\u53e4\u65f6\u5149",description:"\u8001\u4e0a\u6d77\u98ce\u60c5\u4eba\u50cf",images:["https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=600&h=900&fit=crop&crop=face"],style:"\u590d\u53e4",location:"\u4e0a\u6d77\u5916\u6ee9",likes:189,createdAt:"2024-01-14"},{id:"3",title:"\u7a97\u8fb9\u601d\u7eea",description:"\u5348\u540e\u7a97\u8fb9\u7684\u9759\u8c27\u65f6\u523b",images:["https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600&h=700&fit=crop&crop=face","https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=700&fit=crop&crop=face"],style:"\u60c5\u7eea",location:"\u4e0a\u6d77\u7530\u5b50\u574a",likes:156,createdAt:"2024-01-13"},{id:"4",title:"\u6e29\u67d4\u5348\u540e",description:"\u9633\u5149\u6d12\u843d\u7684\u6e29\u67d4\u77ac\u95f4",images:["https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600&h=800&fit=crop&crop=face"],style:"\u6e05\u65b0",location:"\u4e0a\u6d77\u690d\u7269\u56ed",likes:312,createdAt:"2024-01-12"},{id:"5",title:"\u90fd\u5e02\u4e3d\u5f71",description:"\u90fd\u5e02\u8857\u5934\u65f6\u5c1a\u4eba\u50cf",images:["https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600&h=750&fit=crop&crop=face"],style:"\u65f6\u5c1a",location:"\u4e0a\u6d77\u9646\u5bb6\u5634",likes:278,createdAt:"2024-01-11"},{id:"6",title:"\u8857\u5934\u6f2b\u6b65",description:"\u57ce\u5e02\u8857\u5934\u7684\u81ea\u7136\u77ac\u95f4",images:["https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?w=600&h=850&fit=crop&crop=face"],style:"\u8857\u62cd",location:"\u4e0a\u6d77\u65b0\u5929\u5730",likes:145,createdAt:"2024-01-10"}]};function u(){var e=(0,l.useState)([]),s=(0,n.A)(e,2),t=s[0],c=s[1],u=(0,l.useState)(!0),d=(0,n.A)(u,2),g=d[0],x=d[1];(0,r.useDidShow)(function(){v()});var v=(0,l.useCallback)(function(){try{var e=o().getStorageSync("user_favorites")||[],s=m(),t=e.map(function(e){var t=s.find(function(s){return s.id===e});return t?{id:t.id,title:t.title,image:t.images[0],style:t.style,likes:t.likes}:null}).filter(function(e){return null!==e});c(t)}catch(e){console.error("\u52a0\u8f7d\u6536\u85cf\u5931\u8d25",e)}x(!1)},[]),b=function(){var e=(0,i.A)((0,a.A)().m(function e(s){var t,c,i;return(0,a.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,(0,p.GQ)("\u53d6\u6d88\u5fc3\u52a8","\u786e\u5b9a\u8981\u53d6\u6d88\u8fd9\u5f20\u56fe\u7247\u7684\u5fc3\u52a8\u5417\uff1f");case 1:if(t=e.v,t)try{c=o().getStorageSync("user_favorites")||[],i=c.filter(function(e){return e!==s}),o().setStorageSync("user_favorites",i),v(),(0,p.P0)("\u5df2\u53d6\u6d88\u5fc3\u52a8")}catch(e){console.error("\u53d6\u6d88\u6536\u85cf\u5931\u8d25",e)}case 2:return e.a(2)}},e)}));return function(s){return e.apply(this,arguments)}}(),j=function(e){o().navigateTo({url:"/pages/detail/index?id=".concat(e)})},y=function(){o().navigateBack()},N=function(){o().switchTab({url:"/pages/index/index"})},S=function(){var e=(0,i.A)((0,a.A)().m(function e(){var s;return(0,a.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,(0,p.GQ)("\u6e05\u7a7a\u5fc3\u52a8","\u786e\u5b9a\u8981\u6e05\u7a7a\u6240\u6709\u5fc3\u52a8\u4f5c\u54c1\u5417\uff1f");case 1:if(s=e.v,s)try{o().setStorageSync("user_favorites",[]),v(),(0,p.P0)("\u5df2\u6e05\u7a7a")}catch(e){console.error("\u6e05\u7a7a\u6536\u85cf\u5931\u8d25",e)}case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),w=t.reduce(function(e,s){return e[s.style]||(e[s.style]=[]),e[s.style].push(s),e},{});return g?(0,f.jsx)(h.Ss,{className:"favorites-loading",children:(0,f.jsx)(h.Ss,{className:"spinner"})}):(0,f.jsxs)(h.Ss,{className:"favorites-page",children:[(0,f.jsxs)(h.Ss,{className:"nav-bar",children:[(0,f.jsx)(h.Ss,{className:"back-btn",onClick:y,children:(0,f.jsx)(h.EY,{className:"back-icon",children:"\u2190"})}),(0,f.jsx)(h.EY,{className:"nav-title",children:"\u6211\u7684\u5fc3\u52a8\u6e05\u5355"}),(0,f.jsx)(h.Ss,{className:"nav-placeholder"})]}),(0,f.jsxs)(h.Ss,{className:"header",children:[(0,f.jsxs)(h.EY,{className:"subtitle",children:["\u5df2\u6536\u85cf ",t.length," \u4e2a\u4f5c\u54c1"]}),t.length>0&&(0,f.jsx)(h.EY,{className:"clear-btn",onClick:S,children:"\u6e05\u7a7a"})]}),0===t.length?(0,f.jsxs)(h.Ss,{className:"empty-state",children:[(0,f.jsx)(h.EY,{className:"empty-icon",children:"\ud83d\udc9d"}),(0,f.jsx)(h.EY,{className:"empty-title",children:"\u8fd8\u6ca1\u6709\u5fc3\u52a8\u4f5c\u54c1"}),(0,f.jsx)(h.EY,{className:"empty-desc",children:"\u6d4f\u89c8\u4f5c\u54c1\u65f6\u70b9\u51fb\u7231\u5fc3\u56fe\u6807\uff0c\u6536\u85cf\u4f60\u559c\u6b22\u7684\u98ce\u683c"}),(0,f.jsx)(h.Ss,{className:"browse-btn",onClick:N,children:(0,f.jsx)(h.EY,{className:"btn-text",children:"\u53bb\u6d4f\u89c8\u4f5c\u54c1"})})]}):(0,f.jsxs)(h.BM,{className:"favorites-list",scrollY:!0,children:[Object.entries(w).map(function(e){var s=(0,n.A)(e,2),t=s[0],c=s[1];return(0,f.jsxs)(h.Ss,{className:"style-group",children:[(0,f.jsxs)(h.Ss,{className:"style-header",children:[(0,f.jsx)(h.EY,{className:"style-name",children:t}),(0,f.jsxs)(h.EY,{className:"style-count",children:[c.length," \u4e2a\u4f5c\u54c1"]})]}),(0,f.jsx)(h.Ss,{className:"style-photos",children:c.map(function(e){return(0,f.jsxs)(h.Ss,{className:"favorite-item",onClick:function(){return j(e.id)},children:[(0,f.jsx)(h._V,{className:"favorite-image",src:e.image,mode:"aspectFill",lazyLoad:!0}),(0,f.jsx)(h.Ss,{className:"favorite-overlay",children:(0,f.jsx)(h.EY,{className:"favorite-title",children:e.title})}),(0,f.jsx)(h.Ss,{className:"remove-btn",onClick:function(s){s.stopPropagation(),b(e.id)},children:(0,f.jsx)(h.EY,{className:"remove-icon",children:"\u2715"})})]},e.id)})})]},t)}),(0,f.jsx)(h.Ss,{className:"list-footer"})]}),t.length>0&&(0,f.jsx)(h.Ss,{className:"bottom-summary",children:(0,f.jsxs)(h.EY,{className:"summary-text",children:["\u4f60\u5fc3\u52a8\u4e86 ",t.length," \u4e2a\u4f5c\u54c1\uff0c\u6db5\u76d6 ",Object.keys(w).length," \u79cd\u98ce\u683c"]})})]})}var d={},g=(0,c.eU)(u,"pages/favorites/index",{root:{cn:[]}},d||{});u&&u.behaviors&&(g.behaviors=(g.behaviors||[]).concat(u.behaviors));Page(g)}},function(e){var s=function(s){return e(e.s=s)};e.O(0,[907,96,76],function(){return s(943)});e.O()}]);