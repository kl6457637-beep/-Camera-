"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[988],{7587:function(s,e,a){var l=a(8870),t=a(5544),n=a(758),c=a.n(n),i=a(6540),r=a(118),o=a(4261),m=a(3439),d=a(3651),u=a(436),h=a(9584),x=a(4848),p=m.Yu.filter(function(s){return"all"!==s.id}).map(function(s){return s.name});function j(s){var e=s.visible,a=s.onClose,l=s.onSubmit,n=(0,i.useState)([]),o=(0,t.A)(n,2),m=o[0],d=o[1],j=(0,i.useState)(""),N=(0,t.A)(j,2),f=N[0],g=N[1],S=(0,i.useState)(""),Y=(0,t.A)(S,2),v=Y[0],E=Y[1],b=(0,i.useState)(""),k=(0,t.A)(b,2),w=k[0],y=k[1],A=(0,i.useState)(""),T=(0,t.A)(A,2),C=T[0],I=T[1],F=(0,i.useState)(""),P=(0,t.A)(F,2),_=P[0],D=P[1],M=(0,i.useState)(!1),O=(0,t.A)(M,2),R=O[0],V=O[1],q=function(){c().chooseImage({count:9-m.length,sizeType:["compressed"],sourceType:["album","camera"],success:function(s){d([].concat((0,u.A)(m),(0,u.A)(s.tempFilePaths)))}})},J=function(s){d(m.filter(function(e,a){return a!==s}))},U=function(){0!==m.length?f.trim()?(V(!0),setTimeout(function(){var s={title:f.trim(),style:v,description:w.trim(),camera:C.trim(),lens:_.trim(),images:m};l(s),z(),c().showToast({title:"\u53d1\u5e03\u6210\u529f",icon:"success"})},1500)):c().showToast({title:"\u8bf7\u8f93\u5165\u4f5c\u54c1\u6807\u9898",icon:"none"}):c().showToast({title:"\u8bf7\u9009\u62e9\u7167\u7247",icon:"none"})},z=function(){d([]),g(""),E(""),y(""),I(""),D(""),V(!1)},B=function(){z(),a()};return(0,x.jsxs)(h.A,{visible:e,onClose:B,title:"\u4e0a\u4f20\u65b0\u4f5c\u54c1",footer:(0,x.jsx)(r.Ss,{className:"modal-btn primary ".concat(R?"loading":""),onClick:R?void 0:U,children:(0,x.jsx)(r.EY,{className:"btn-text",children:R?"\u4e0a\u4f20\u4e2d...":"\u53d1\u5e03\u4f5c\u54c1"})}),children:[(0,x.jsxs)(r.Ss,{className:"form-group",children:[(0,x.jsxs)(r.EY,{className:"form-label",children:["\u7167\u7247 ",(0,x.jsx)(r.EY,{className:"required",children:"*"})]}),(0,x.jsxs)(r.Ss,{className:"photo-section",children:[(0,x.jsxs)(r.Ss,{className:"photo-grid",children:[m.map(function(s,e){return(0,x.jsxs)(r.Ss,{className:"photo-item",children:[(0,x.jsx)(r._V,{className:"photo-preview",src:s,mode:"aspectFill"}),(0,x.jsx)(r.Ss,{className:"photo-remove",onClick:function(){return J(e)},children:(0,x.jsx)(r.EY,{className:"remove-icon",children:"\xd7"})})]},e)}),m.length<9&&(0,x.jsxs)(r.Ss,{className:"photo-add",onClick:q,children:[(0,x.jsx)(r.EY,{className:"add-icon",children:"+"}),(0,x.jsx)(r.EY,{className:"add-text",children:"\u6dfb\u52a0\u7167\u7247"})]})]}),(0,x.jsx)(r.EY,{className:"photo-hint",children:"\u6700\u591a\u4e0a\u4f209\u5f20\u7167\u7247"})]})]}),(0,x.jsxs)(r.Ss,{className:"form-group",children:[(0,x.jsxs)(r.EY,{className:"form-label",children:["\u6807\u9898 ",(0,x.jsx)(r.EY,{className:"required",children:"*"})]}),(0,x.jsx)(r.pd,{className:"form-input",value:f,onInput:function(s){return g(s.detail.value)},placeholder:"\u7ed9\u4f60\u7684\u4f5c\u54c1\u8d77\u4e2a\u540d\u5b57",maxlength:50})]}),(0,x.jsxs)(r.Ss,{className:"form-group",children:[(0,x.jsx)(r.EY,{className:"form-label",children:"\u98ce\u683c\u6807\u7b7e"}),(0,x.jsxs)(r.Ss,{className:"style-section",children:[(0,x.jsx)(r.EY,{className:"style-title",children:"\u70b9\u51fb\u9009\u62e9\u5e38\u7528\u6807\u7b7e"}),(0,x.jsx)(r.Ss,{className:"style-options",children:p.map(function(s){return(0,x.jsx)(r.Ss,{className:"style-option ".concat(v===s?"selected":""),onClick:function(){return E(s)},children:(0,x.jsx)(r.EY,{className:"style-text",children:s})},s)})})]})]}),(0,x.jsxs)(r.Ss,{className:"form-group",children:[(0,x.jsx)(r.EY,{className:"form-label",children:"\u521b\u4f5c\u60f3\u6cd5"}),(0,x.jsx)(r.TM,{className:"form-textarea",value:w,onInput:function(s){return y(s.detail.value)},placeholder:"\u5206\u4eab\u8fd9\u5f20\u7167\u7247\u80cc\u540e\u7684\u6545\u4e8b\u3001\u62cd\u6444\u5fc3\u5f97\u3001\u521b\u4f5c\u7406\u5ff5...",maxlength:500})]}),(0,x.jsxs)(r.Ss,{className:"form-group",children:[(0,x.jsx)(r.EY,{className:"form-label",children:"\u62cd\u6444\u8bbe\u5907"}),(0,x.jsxs)(r.Ss,{className:"gear-section",children:[(0,x.jsx)(r.pd,{className:"gear-input",value:C,onInput:function(s){return I(s.detail.value)},placeholder:"\u76f8\u673a\u578b\u53f7"}),(0,x.jsx)(r.pd,{className:"gear-input",value:_,onInput:function(s){return D(s.detail.value)},placeholder:"\u955c\u5934"})]})]})]})}function N(){var s=(0,o.Us)(),e=s.works,a=s.addWork,l=s.isPhotographerMode,u=(0,i.useState)(!1),h=(0,t.A)(u,2),p=h[0],N=h[1];(0,n.useDidShow)(function(){l||(c().showToast({title:"\u8bf7\u5148\u5f00\u542f\u6444\u5f71\u5e08\u6a21\u5f0f",icon:"none"}),c().switchTab({url:"/pages/index/index"}))});var f=function(s){var e={id:"work_"+Date.now(),title:s.title,description:s.description,images:s.images,style:s.style,camera:s.camera,lens:s.lens,likes:0,createdAt:(new Date).toISOString().split("T")[0]};a(e),N(!1)},g=function(s){c().navigateTo({url:"/pages/detail/index?id=".concat(s)})};return(0,x.jsxs)(r.Ss,{className:"admin-page",children:[(0,x.jsxs)(r.Ss,{className:"page-header",children:[(0,x.jsx)(r.EY,{className:"page-title",children:"\u6211\u7684\u4f5c\u54c1"}),(0,x.jsx)(r.EY,{className:"page-subtitle",children:"\u7ba1\u7406\u4f60\u7684\u4f5c\u54c1\u96c6"})]}),(0,x.jsxs)(r.Ss,{className:"portfolio-header",children:[(0,x.jsx)(r._V,{className:"portfolio-avatar",src:m.kR.avatar,mode:"aspectFill"}),(0,x.jsx)(r.EY,{className:"portfolio-name",children:m.kR.name}),(0,x.jsx)(r.EY,{className:"portfolio-bio",children:m.kR.bio})]}),(0,x.jsxs)(r.Ss,{className:"portfolio-stats",children:[(0,x.jsxs)(r.Ss,{className:"stat-item",children:[(0,x.jsx)(r.EY,{className:"stat-value",children:e.length}),(0,x.jsx)(r.EY,{className:"stat-label",children:"\u4f5c\u54c1"})]}),(0,x.jsxs)(r.Ss,{className:"stat-item",children:[(0,x.jsx)(r.EY,{className:"stat-value",children:"2.3k"}),(0,x.jsx)(r.EY,{className:"stat-label",children:"\u6536\u85cf"})]}),(0,x.jsxs)(r.Ss,{className:"stat-item",children:[(0,x.jsx)(r.EY,{className:"stat-value",children:"56"}),(0,x.jsx)(r.EY,{className:"stat-label",children:"\u9884\u7ea6"})]})]}),(0,x.jsxs)(r.Ss,{className:"upload-area",onClick:function(){return N(!0)},children:[(0,x.jsx)(r.EY,{className:"upload-icon",children:"+"}),(0,x.jsx)(r.EY,{className:"upload-title",children:"\u4e0a\u4f20\u65b0\u4f5c\u54c1"}),(0,x.jsx)(r.EY,{className:"upload-desc",children:"\u70b9\u51fb\u6dfb\u52a0\u7167\u7247\u3001\u98ce\u683c\u6807\u7b7e\u548c\u521b\u4f5c\u60f3\u6cd5"})]}),(0,x.jsx)(r.BM,{className:"works-panel",scrollY:!0,children:0===e.length?(0,x.jsxs)(r.Ss,{className:"empty-state",children:[(0,x.jsx)(r.EY,{className:"empty-icon",children:"\ud83d\udced"}),(0,x.jsx)(r.EY,{className:"empty-text",children:"\u8fd8\u6ca1\u6709\u4f5c\u54c1"}),(0,x.jsx)(r.Ss,{className:"empty-btn",onClick:function(){return N(!0)},children:(0,x.jsx)(r.EY,{children:"\u53bb\u4e0a\u4f20"})})]}):(0,x.jsx)(r.Ss,{className:"portfolio-grid",children:e.map(function(s){return(0,x.jsxs)(r.Ss,{className:"portfolio-grid-item",onClick:function(){return g(s.id)},children:[(0,x.jsx)(r._V,{className:"grid-image",src:s.images[0],mode:"aspectFill"}),(0,x.jsx)(r.Ss,{className:"portfolio-grid-overlay",children:(0,x.jsx)(r.Ss,{className:"portfolio-grid-stats",children:(0,x.jsxs)(r.Ss,{className:"portfolio-grid-stat",children:[(0,x.jsx)(r.EY,{className:"stat-icon",children:"\u2764\ufe0f"}),(0,x.jsx)(r.EY,{className:"stat-num",children:s.likes})]})})}),s.images.length>1&&(0,x.jsx)(r.Ss,{className:"multi-badge",children:(0,x.jsx)(r.EY,{className:"badge-text",children:"\u591a\u56fe"})})]},s.id)})})}),(0,x.jsx)(d.A,{currentPage:"works"}),(0,x.jsx)(j,{visible:p,onClose:function(){return N(!1)},onSubmit:f})]})}var f={},g=(0,l.eU)(N,"pages/admin/index",{root:{cn:[]}},f||{});N&&N.behaviors&&(g.behaviors=(g.behaviors||[]).concat(N.behaviors));Page(g)}},function(s){var e=function(e){return s(s.s=e)};s.O(0,[907,96,76],function(){return e(7587)});s.O()}]);