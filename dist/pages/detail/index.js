"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[154],{8295:function(s,e,c){var a=c(8870),t=c(436),i=c(5544),o=c(758),n=c.n(o),l=c(6540),r=c(118),h=c(4261),m=c(9981),d=c(4848),p=function(){return[{id:"1",title:"\u6668\u5149\u5c11\u5973",description:"\u81ea\u7136\u5149\u4e0b\u7684\u6e29\u67d4\u65f6\u523b",images:["https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=800&fit=crop&crop=face","https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600&h=800&fit=crop&crop=face","https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600&h=800&fit=crop&crop=face"],style:"\u6e05\u65b0",camera:"Canon EOS R5",lens:"RF 85mm f/1.2L",location:"\u4e0a\u6d77\u6cd5\u79df\u754c",likes:234,createdAt:"2024-01-15"},{id:"2",title:"\u590d\u53e4\u65f6\u5149",description:"\u8001\u4e0a\u6d77\u98ce\u60c5\u4eba\u50cf",images:["https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=600&h=900&fit=crop&crop=face"],style:"\u590d\u53e4",camera:"Sony A7M4",lens:"FE 50mm f/1.2",location:"\u4e0a\u6d77\u5916\u6ee9",likes:189,createdAt:"2024-01-14"},{id:"3",title:"\u7a97\u8fb9\u601d\u7eea",description:"\u5348\u540e\u7a97\u8fb9\u7684\u9759\u8c27\u65f6\u523b",images:["https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600&h=700&fit=crop&crop=face","https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=700&fit=crop&crop=face"],style:"\u60c5\u7eea",camera:"Fujifilm XT-4",lens:"XF 56mm f/1.2",location:"\u4e0a\u6d77\u7530\u5b50\u574a",likes:156,createdAt:"2024-01-13"},{id:"4",title:"\u6e29\u67d4\u5348\u540e",description:"\u9633\u5149\u6d12\u843d\u7684\u6e29\u67d4\u77ac\u95f4",images:["https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600&h=800&fit=crop&crop=face"],style:"\u6e05\u65b0",camera:"Canon EOS R6",lens:"RF 50mm f/1.8",location:"\u4e0a\u6d77\u690d\u7269\u56ed",likes:312,createdAt:"2024-01-12"},{id:"5",title:"\u90fd\u5e02\u4e3d\u5f71",description:"\u90fd\u5e02\u8857\u5934\u65f6\u5c1a\u4eba\u50cf",images:["https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&h=750&fit=crop&crop=face","https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600&h=750&fit=crop&crop=face"],style:"\u65f6\u5c1a",camera:"Nikon Z6 II",lens:"Z 85mm f/1.8",location:"\u4e0a\u6d77\u9646\u5bb6\u5634",likes:278,createdAt:"2024-01-11"},{id:"6",title:"\u8857\u5934\u6f2b\u6b65",description:"\u57ce\u5e02\u8857\u5934\u7684\u81ea\u7136\u77ac\u95f4",images:["https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?w=600&h=850&fit=crop&crop=face"],style:"\u8857\u62cd",camera:"Leica Q2",lens:"Summilux 28mm",location:"\u4e0a\u6d77\u65b0\u5929\u5730",likes:145,createdAt:"2024-01-10"}]};function f(){var s=(0,h.Us)(),e=s.works,c=s.toggleFavorite,a=(0,l.useState)(null),f=(0,i.A)(a,2),u=f[0],g=f[1],x=(0,l.useState)(!1),j=(0,i.A)(x,2),b=j[0],S=j[1],N=(0,l.useState)(0),k=(0,i.A)(N,2),v=k[0],w=k[1],E=(0,l.useState)(!0),y=(0,i.A)(E,2),A=y[0],C=y[1],Y=(0,l.useState)(""),F=(0,i.A)(Y,2),O=F[0],R=F[1],_=(0,l.useState)(!1),L=(0,i.A)(_,2),I=L[0],T=L[1];(0,o.useLoad)(function(s){var e=null===s||void 0===s?void 0:s.id;e?(R(e),J(e)):C(!1)});var J=(0,l.useCallback)(function(s){try{var c=e;c&&0!==c.length||(c=p());var a=c.find(function(e){return e.id===s});if(a){var t=n().getStorageSync("user_favorites")||[];g(a),S(t.indexOf(s)>-1)}C(!1)}catch(s){console.error("\u52a0\u8f7d\u4f5c\u54c1\u5931\u8d25",s),C(!1)}},[e]),U=(0,l.useCallback)(function(){if(u)try{var s,e=n().getStorageSync("user_favorites")||[];s=b?e.filter(function(s){return s!==u.id}):[].concat((0,t.A)(e),[u.id]),n().setStorageSync("user_favorites",s),S(!b),c(u.id)}catch(s){console.error("\u5207\u6362\u6536\u85cf\u5931\u8d25",s)}},[u,b,c]),V=(0,l.useCallback)(function(s){w(s.detail.current)},[]),X=(0,l.useCallback)(function(){n().navigateBack()},[]),Z=(0,l.useCallback)(function(){n().switchTab({url:"/pages/index/index"})},[]),z=(0,l.useCallback)(function(){T(!0)},[]),B=function(s){console.log("\u9884\u7ea6\u6570\u636e:",s),n().showToast({title:"\u9884\u7ea6\u6210\u529f",icon:"success"}),T(!1)};return A?(0,d.jsx)(r.Ss,{className:"loading",children:(0,d.jsx)(r.EY,{children:"\u52a0\u8f7d\u4e2d..."})}):u?(0,d.jsxs)(r.Ss,{className:"page",children:[(0,d.jsxs)(r.Ss,{className:"img-box",children:[(0,d.jsx)(r.RC,{className:"swiper",style:{height:"100%"},indicatorDots:u.images.length>1,indicatorColor:"rgba(255,255,255,0.5)",indicatorActiveColor:"#fff",onChange:V,circular:u.images.length>1,children:u.images.map(function(s,e){return(0,d.jsx)(r.wu,{style:{width:"100%",height:"100%"},children:(0,d.jsx)(r._V,{className:"img",src:s,mode:"aspectFill",style:{width:"100%",height:"100%"},lazyLoad:!0})},e)})}),u.images.length>1&&(0,d.jsx)(r.Ss,{className:"page-num",children:(0,d.jsxs)(r.EY,{children:[v+1,"/",u.images.length]})})]}),(0,d.jsx)(r.Ss,{className:"close",onClick:X,children:(0,d.jsx)(r.EY,{children:"\u2715"})}),(0,d.jsxs)(r.Ss,{className:"panel",children:[(0,d.jsxs)(r.Ss,{className:"user",children:[(0,d.jsx)(r._V,{className:"avatar",src:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100",mode:"aspectFill"}),(0,d.jsxs)(r.Ss,{className:"info",children:[(0,d.jsx)(r.EY,{className:"name",children:"\u5149\u5f71\u8bd7\u4eba"}),(0,d.jsx)(r.EY,{className:"loc",children:"\u4e0a\u6d77"})]})]}),(0,d.jsxs)(r.Ss,{className:"content",children:[(0,d.jsx)(r.EY,{className:"title",children:u.title}),(0,d.jsx)(r.EY,{className:"desc",children:u.description}),(0,d.jsxs)(r.Ss,{className:"info-row",children:[(0,d.jsxs)(r.EY,{className:"style-tag",children:["#",u.style]}),u.location&&(0,d.jsxs)(r.Ss,{className:"location-tag",children:[(0,d.jsx)(r.EY,{className:"location-icon",children:"\ud83d\udccd"}),(0,d.jsx)(r.EY,{className:"location-text",children:u.location})]})]}),(u.camera||u.lens)&&(0,d.jsxs)(r.EY,{className:"cam",children:["\ud83d\udcf7 ",u.camera," ",u.lens]}),(0,d.jsxs)(r.EY,{className:"date",children:["\u53d1\u5e03\u4e8e ",u.createdAt]})]}),(0,d.jsxs)(r.Ss,{className:"actions",children:[(0,d.jsxs)(r.Ss,{className:"btn like "+(b?"active":""),onClick:U,children:[(0,d.jsx)(r.EY,{children:b?"\u2764\ufe0f":"\ud83e\udd0d"}),(0,d.jsx)(r.EY,{children:b?"\u5df2\u5fc3\u52a8":"\u5fc3\u52a8"})]}),(0,d.jsx)(r.Ss,{className:"btn book",onClick:z,children:(0,d.jsx)(r.EY,{children:"\ud83d\udcf8 \u9884\u7ea6\u62cd\u6444"})})]})]}),(0,d.jsx)(m.A,{visible:I,onClose:function(){return T(!1)},onSubmit:B,initialWorkId:O})]}):(0,d.jsxs)(r.Ss,{className:"loading",children:[(0,d.jsx)(r.EY,{children:"\u4f5c\u54c1\u4e0d\u5b58\u5728"}),(0,d.jsx)(r.EY,{className:"back",onClick:Z,children:"\u8fd4\u56de\u9996\u9875"})]})}var u={},g=(0,a.eU)(f,"pages/detail/index",{root:{cn:[]}},u||{});f&&f.behaviors&&(g.behaviors=(g.behaviors||[]).concat(f.behaviors));Page(g)}},function(s){var e=function(e){return s(s.s=e)};s.O(0,[907,96,76],function(){return e(8295)});s.O()}]);